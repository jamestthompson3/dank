<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Neovim on teukka.tech</title><link>https://teukka.tech/tags/neovim/</link><description>Recent content in Neovim on teukka.tech</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Thu, 11 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://teukka.tech/tags/neovim/index.xml" rel="self" type="application/rss+xml"/><item><title>Neovim Tip, Smarter Path</title><link>https://teukka.tech/posts/vimtip-path/</link><pubDate>Thu, 11 Nov 2021 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/vimtip-path/</guid><description>&lt;h2 id="intro"&gt;Intro&lt;/h2&gt;
&lt;p&gt;Fuzzy finders can be a good tool for navigating files in a codebase, but they don&amp;rsquo;t give you the
same functionality as a properly set &lt;code&gt;path&lt;/code&gt; option in vim. Key mappings like &lt;code&gt;gf&lt;/code&gt;, &lt;code&gt;[i&lt;/code&gt;, &lt;code&gt;[d&lt;/code&gt;, and
commands like &lt;code&gt;:find&lt;/code&gt; depend on having your path set correctly to find the file you&amp;rsquo;re searching
for. Using the &lt;code&gt;:find&lt;/code&gt; command also gives us the ability to tab complete a file name, a feature
which fuzzy finders do not offer.&lt;/p&gt;</description></item><item><title>(Nvim) Lua for Javascripters: Module Exports</title><link>https://teukka.tech/posts/js-to-lua-modules/</link><pubDate>Wed, 31 Mar 2021 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/js-to-lua-modules/</guid><description>&lt;h2 id="goals"&gt;Goals&lt;/h2&gt;
&lt;p&gt;This aims to be quick reference guide on lua module exports compared to JavaScript module exports.&lt;/p&gt;
&lt;h2 id="task"&gt;Task&lt;/h2&gt;
&lt;p&gt;We want to export a series of module scoped functions in both JavaScript and Lua. This guide also show side by side comparisons on writing a file to a specific directory and deleting a file from the same directory.&lt;/p&gt;
&lt;p&gt;In this quick tip, we will use CommonJS as the format for the JavaScript modules since it more closely resembles Lua modules in its construction.&lt;/p&gt;</description></item><item><title>(Nvim) Lua for Javascripters: Spawning Processes</title><link>https://teukka.tech/posts/js-to-lua/</link><pubDate>Tue, 16 Mar 2021 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/js-to-lua/</guid><description>&lt;h2 id="goals"&gt;Goals&lt;/h2&gt;
&lt;p&gt;This should be a quick reference guide for those familiar with NodeJS on how to execute the same async tasks in Lua using luv. This is aimed towards use cases inside Neovim, but is not limited to those cases.&lt;/p&gt;
&lt;h2 id="task"&gt;Task&lt;/h2&gt;
&lt;p&gt;We want to spawn a child task to convert a markdown document into HTML using &lt;a href="https://pandoc.org/"&gt;pandoc&lt;/a&gt;. This could be used as part of a publishing flow for a blog, for writing notes, or for implementing a markdown previewer.&lt;/p&gt;</description></item><item><title>Neovim Tip, GitLens</title><link>https://teukka.tech/posts/2020-01-28-vimtip-gitlens/</link><pubDate>Tue, 28 Jan 2020 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/2020-01-28-vimtip-gitlens/</guid><description>&lt;h2 id="intro"&gt;Intro&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens"&gt;GitLens&lt;/a&gt; is a VSCode plugin that, among other things, allows you to see the time, commit author, and commit message of the current line. With a little help from to the neovim api and our shell, it we can recreate this functionality in a few lines of lua code.&lt;/p&gt;
&lt;h2 id="the-code"&gt;The Code&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#0f0"&gt;-- in utils.lua&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;local&lt;/span&gt; M = {}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;local&lt;/span&gt; api = vim.api
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;function&lt;/span&gt; M.&lt;span style="color:#ff0"&gt;blameVirtText&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; ft = vim.fn.expand(&lt;span style="color:#87ceeb"&gt;&amp;#39;%:h:t&amp;#39;&lt;/span&gt;) &lt;span style="color:#0f0"&gt;-- get the current file extension&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;if&lt;/span&gt; ft == &lt;span style="color:#87ceeb"&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span style="color:#f00"&gt;then&lt;/span&gt; &lt;span style="color:#0f0"&gt;-- if we are in a scratch buffer or unknown filetype&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;if&lt;/span&gt; ft == &lt;span style="color:#87ceeb"&gt;&amp;#39;bin&amp;#39;&lt;/span&gt; &lt;span style="color:#f00"&gt;then&lt;/span&gt; &lt;span style="color:#0f0"&gt;-- if we are in nvim&amp;#39;s terminal window&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; api.nvim_buf_clear_namespace(&lt;span style="color:#f60"&gt;0&lt;/span&gt;, &lt;span style="color:#f60"&gt;2&lt;/span&gt;, &lt;span style="color:#f60"&gt;0&lt;/span&gt;, -&lt;span style="color:#f60"&gt;1&lt;/span&gt;) &lt;span style="color:#0f0"&gt;-- clear out virtual text from namespace 2 (the namespace we will set later)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; currFile = vim.fn.expand(&lt;span style="color:#87ceeb"&gt;&amp;#39;%&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; line = api.nvim_win_get_cursor(&lt;span style="color:#f60"&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; blame = vim.fn.system(string.format(&lt;span style="color:#87ceeb"&gt;&amp;#39;git blame -c -L %d,%d %s&amp;#39;&lt;/span&gt;, line[&lt;span style="color:#f60"&gt;1&lt;/span&gt;], line[&lt;span style="color:#f60"&gt;1&lt;/span&gt;], currFile))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; hash = vim.split(blame, &lt;span style="color:#87ceeb"&gt;&amp;#39;%s&amp;#39;&lt;/span&gt;)[&lt;span style="color:#f60"&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;local&lt;/span&gt; cmd = string.format(&lt;span style="color:#87ceeb"&gt;&amp;#34;git show %s &amp;#34;&lt;/span&gt;, hash)..&lt;span style="color:#87ceeb"&gt;&amp;#34;--format=&amp;#39;%an | %ar | %s&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;if&lt;/span&gt; hash == &lt;span style="color:#87ceeb"&gt;&amp;#39;00000000&amp;#39;&lt;/span&gt; &lt;span style="color:#f00"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; text = &lt;span style="color:#87ceeb"&gt;&amp;#39;Not Committed Yet&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; text = vim.fn.system(cmd)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; text = vim.split(text, &lt;span style="color:#87ceeb"&gt;&amp;#39;&lt;/span&gt;&lt;span style="color:#87ceeb"&gt;\n&lt;/span&gt;&lt;span style="color:#87ceeb"&gt;&amp;#39;&lt;/span&gt;)[&lt;span style="color:#f60"&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;if&lt;/span&gt; text:gmatch(&lt;span style="color:#87ceeb"&gt;&amp;#34;fatal&amp;#34;&lt;/span&gt;) &lt;span style="color:#f00"&gt;then&lt;/span&gt; &lt;span style="color:#0f0"&gt;-- if the call to git show fails&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; text = &lt;span style="color:#87ceeb"&gt;&amp;#39;Not Committed Yet&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; api.nvim_buf_set_virtual_text(&lt;span style="color:#f60"&gt;0&lt;/span&gt;, &lt;span style="color:#f60"&gt;2&lt;/span&gt;, line[&lt;span style="color:#f60"&gt;1&lt;/span&gt;] - &lt;span style="color:#f60"&gt;1&lt;/span&gt;, {{ text,&lt;span style="color:#87ceeb"&gt;&amp;#39;GitLens&amp;#39;&lt;/span&gt; }}, {}) &lt;span style="color:#0f0"&gt;-- set virtual text for namespace 2 with the content from git and assign it to the higlight group &amp;#39;GitLens&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;function&lt;/span&gt; M.&lt;span style="color:#ff0"&gt;clearBlameVirtText&lt;/span&gt;() &lt;span style="color:#0f0"&gt;-- important for clearing out the text when our cursor moves&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; api.nvim_buf_clear_namespace(&lt;span style="color:#f60"&gt;0&lt;/span&gt;, &lt;span style="color:#f60"&gt;2&lt;/span&gt;, &lt;span style="color:#f60"&gt;0&lt;/span&gt;, -&lt;span style="color:#f60"&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;return&lt;/span&gt; M
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#0f0"&gt;&amp;#34; in init.vim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lua vim.api.nvim_command [[&lt;span style="color:#f00"&gt;autocmd&lt;/span&gt; CursorHold * lua require&lt;span style="color:#87ceeb"&gt;&amp;#39;utils&amp;#39;&lt;/span&gt;.blameVirtText()]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lua vim.api.nvim_command [[&lt;span style="color:#f00"&gt;autocmd&lt;/span&gt; CursorMoved * lua require&lt;span style="color:#87ceeb"&gt;&amp;#39;utils&amp;#39;&lt;/span&gt;.clearBlameVirtText()]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lua vim.api.nvim_command [[&lt;span style="color:#f00"&gt;autocmd&lt;/span&gt; CursorMovedI * lua require&lt;span style="color:#87ceeb"&gt;&amp;#39;utils&amp;#39;&lt;/span&gt;.clearBlameVirtText()]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f00"&gt;hi&lt;/span&gt;! link GitLens Comment
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Using LibUV in Neovim</title><link>https://teukka.tech/posts/2020-01-07-vimloop/</link><pubDate>Tue, 07 Jan 2020 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/2020-01-07-vimloop/</guid><description>&lt;h2 id="off-the-main-loop-async-actions-within-neovim"&gt;Off The Main Loop: Async Actions within Neovim&lt;/h2&gt;
&lt;p&gt;Neovim embeds the libuv library in the editor and exposes lua (and to some extent vimscript through the &lt;code&gt;jobstart&lt;/code&gt; function) bindings for interacting with the library&amp;rsquo;s API. This allows actions in the editor to happen asynchronously, keeping the main editor loop clear for user input. What this means practically for users is that actions which take a long time such as grepping through large projects, generating ctags, or linting can now be done in the background without blocking the user&amp;rsquo;s ability to keep editing text.&lt;/p&gt;</description></item><item><title>From init.vim to init.lua</title><link>https://teukka.tech/posts/2019-12-19-luanvim/</link><pubDate>Mon, 16 Dec 2019 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/2019-12-19-luanvim/</guid><description>&lt;h2 id="why-lua"&gt;Why Lua?&lt;/h2&gt;
&lt;p&gt;Neovim has an embedded lua 5.1 runtime which is used to create faster and more powerful extensions of your favorite editor. In the &lt;a href="https://neovim.io/charter/"&gt;Neovim charter&lt;/a&gt;, it lists one of its goals as developing a first-class lua scripting alternative to VimL. One of the reasons for doing this is that VimL is a slow interpreted language with almost no optimizations. Much of the time spent in vim startup and in actions from plugins that can block the main loop in the editor is in parsing and executing vimscript. A great explanation of this can be found in Neovim lead maintainer, Justin M. Keyes&amp;rsquo; talk, &lt;a href="https://www.youtube.com/watch?v=Bt-vmPC_-Ho"&gt;We can have nice things&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Vim does that already</title><link>https://teukka.tech/posts/2019-08-25-vimcandothat/</link><pubDate>Sun, 25 Aug 2019 00:00:00 +0000</pubDate><guid>https://teukka.tech/posts/2019-08-25-vimcandothat/</guid><description>&lt;h2 id="power-to-productivity"&gt;Power to Productivity&lt;/h2&gt;
&lt;p&gt;Vim is a powerful tool which helps you stay productive and spend less time doing the mechanical work of coding.
For many, Vim seems archaic, under-featured, or even intimidating. I hope to illustrate that Vim none of those things, but is in fact a great editor for nearly every development environment.&lt;/p&gt;
&lt;p&gt;I want to focus on three common tasks where Vim helps you be more productive without leaving your editor. These tasks are: navigation between files, and searching / replacing.
No Vim experience is necessary for this post, but it definitely helps if you are at least familiar with the basics through &lt;code&gt;vimtutor&lt;/code&gt;.&lt;/p&gt;</description></item></channel></rss>