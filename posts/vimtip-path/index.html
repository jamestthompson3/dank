<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>💡 5 Minute Neovim Tip - Smarter Path</title><meta name=viewport content="width=device-width,initial-scale=1">
<link rel=canonical href=https://teukka.tech/posts/vimtip-path/>
<link rel=webmention href=https://webmention.io/teukka.tech/webmention>
<link rel=pingback href=https://webmention.io/teukka.tech/xmlrpc>
<link rel=micropub href=http://pub.teukka.tech/micropub/main><meta property="og:title" content="Neovim Tip, Smarter Path">
<meta property="og:description" content="Easily set your vim path per project and get only the files you want.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://teukka.tech/posts/vimtip-path/"><meta property="og:image" content="https://neovim.io/images/logo@2x.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-11-11T00:00:00+00:00">
<meta property="article:modified_time" content="2021-11-11T00:00:00+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://neovim.io/images/logo@2x.png">
<meta name=twitter:title content="Neovim Tip, Smarter Path">
<meta name=twitter:description content="Easily set your vim path per project and get only the files you want.">
<link href=https://teukka.tech/css/fonts.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/main.css>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/paginator.css>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/hcard.css>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/updates.css>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/fastsearch.css>
<link rel=stylesheet type=text/css media=screen href=https://teukka.tech/css/bookmarks.css><link rel=stylesheet type=text/css href=https://teukka.tech/css/dark.css media="(prefers-color-scheme: dark)">
<script>window.location.host!=='teukka.tech'&&(window.goatcounter={no_onload:!0})</script>
</head>
<body>
<div class=content><header>
<div class=main>
<a class=homepage href=https://teukka.tech/>teukka.tech</a>
</div>
<nav>
<a href=/posts>posts</a>
<a href=/updates>updates</a>
<a href=/photos>photos</a>
<a href=/bookmarks>bookmarks</a>
<a href=/knowledgebase>knowledge base</a>
</nav>
<div id=fastSearch>
<label for=searchInput style=display:none>search the blog</label>
<input id=searchInput tabindex=0 placeholder="search 🔍">
<ul id=searchResults>
</ul>
</div>
</header>
<main>
<br>
<br>
<article class="h-entry post">
<div class=title>
<h1 class=title><a class="p-name u-url" href=https://teukka.tech/posts/vimtip-path/>Neovim Tip, Smarter Path</a></h1>
<div class="dt-published meta">Posted on 2021-11-11</div>
<a rel=author class="p-author h-card" href=/>taylor thompson</a>
</div>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a class=p-category href=/tags/neovim>neovim</a></li>
<li><a class=p-category href=/tags/vim>vim</a></li>
<li><a class=p-category href=/tags/lua>lua</a></li>
<li><a class=p-category href=/tags/productivity>productivity</a></li>
</ul>
</nav>
</div>
<section class="body e-content">
<h2 id=intro>Intro</h2>
<p>Fuzzy finders can be a good tool for navigating files in a codebase, but they don&rsquo;t give you the
same functionality as a properly set <code>path</code> option in vim. Key mappings like <code>gf</code>, <code>[i</code>, <code>[d</code>, and
commands like <code>:find</code> depend on having your path set correctly to find the file you&rsquo;re searching
for. Using the <code>:find</code> command also gives us the ability to tab complete a file name, a feature
which fuzzy finders do not offer.</p>
<p>An poorly set path can cause a significant slow down when trying to tab complete a filename with
<code>:find</code>, or jump to a file with <code>gf</code>, especially if you work with languages like javascript where
projects contain the fathomless void known as <code>node_modules</code>.</p>
<p>In his <a href=https://gist.github.com/romainl/7e2b425a1706cd85f04a0bd8b3898805>excellent gist</a>, romainl
illustrates how a well set path can make navigating a codebase quick and easy, capturing only the
files relevant to our work in a project. However, in his gist he sets the path manually, what I want
to do is automatically set the path on a per-project basis. My answer to this, is to use <a href=https://github.com/sharkdp/fd>fd</a>.</p>
<h2 id=the-code>The Code</h2>
<p>I added the following code to my <code>init.lua</code>, but it can work in vimscript and in regular vim as
well! This requires that you have the <code>fd</code> binary installed on your machine.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>vim.o.path = table.concat(vim.fn.systemlist(<span style=color:#87ceeb>&#34;fd . --type d&#34;</span>),<span style=color:#87ceeb>&#34;,&#34;</span>)
</code></pre></div><p>Since <code>fd</code> will respect your <code>.gitignore</code> file, the above code will set every directory currently
tracked by git in your path, ensuring that you can access your project files without having to deal
with slowdowns caused by vim looking inside of directories such as <code>node_modules</code>.</p>
<p>To speed things up when you open a directory in a path that is not currently tracked by git, you
can use the following snippet:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>
<span style=color:red>local</span> setPath = <span style=color:red>function</span>()
  <span style=color:red>if</span> gitBranch() ~= <span style=color:#87ceeb>&#34;&#34;</span> <span style=color:red>then</span>
    <span style=color:red>return</span> table.concat(vim.fn.systemlist(<span style=color:#87ceeb>&#34;fd . --type d --hidden -E .git -E .yarn&#34;</span>),<span style=color:#87ceeb>&#34;,,&#34;</span>) .. <span style=color:#87ceeb>&#34;,&#34;</span> .. table.concat(vim.fn.systemlist(<span style=color:#87ceeb>&#34;fd --type f --max-depth 1&#34;</span>), <span style=color:#87ceeb>&#34;,&#34;</span>):gsub(<span style=color:#87ceeb>&#34;./&#34;</span>, <span style=color:#87ceeb>&#34;&#34;</span>) <span style=color:#0f0>-- grab both the dirs and the top level files</span>
  <span style=color:red>else</span>
    <span style=color:red>return</span> vim.o.path
  <span style=color:red>end</span>
<span style=color:red>end</span>

vim.o.path = setPath()
</code></pre></div>
</section>
</article>
</main>
<h3>See Also</h3>
<ul>
<li><a href=/posts/2020-01-28-vimtip-gitlens/>Neovim Tip, GitLens</a></li>
<li><a href=/posts/2019-08-25-vimcandothat/>Vim does that already</a></li>
<li><a href=/posts/js-to-lua-modules/>(Nvim) Lua for Javascripters: Module Exports</a></li>
<li><a href=/posts/js-to-lua/>(Nvim) Lua for Javascripters: Spawning Processes</a></li>
<li><a href=/posts/2020-01-07-vimloop/>Using LibUV in Neovim</a></li>
<li><a href=/posts/2019-12-19-luanvim/>From init.vim to init.lua</a></li>
<li><a href=/updates/39029/>39029</a></li>
<li><a href=/updates/37805/>37805</a></li>
</ul>
<div class=webmention>
</div>
<script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><footer>
<hr><div class=h-card>
<a class=pic-link href=https://en.wikipedia.org/wiki/Pygmy_slow_loris><img class=u-photo src=https://teukka.tech/Nycticebus_pygmaeus_002.jpg alt="pygmy
    slow loris, an endangered and beautiful creature"></a>
<div class=info>
<span class=p-name>Taylor Thompson</span>
<a class=u-email href=mailto:taylor@teukka.tech>taylor@teukka.tech</a>
<a rel=me class=u-url>https://teukka.tech</a>
<span class=p-note>eternally curious person</span>
</div>
</div>
<small>&copy; taylor thompson</small>
</footer>
<script data-goatcounter=https://teukka_tech.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
</div>
</body>
</html>